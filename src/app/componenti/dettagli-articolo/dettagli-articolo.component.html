<div class="articolo-container" *ngIf="articolo">
  <div class="articolo-img">
    <img [src]="articolo.urlImmagine" alt="{{ articolo.nome }}" />
  </div>

  <div class="articolo-form">
    <h2>Gestione Articolo</h2>

    <form [formGroup]="updateForm" (ngSubmit)="onSubmit()" autocomplete="off">
      <div class="form-grid">
        <!-- Nome -->
        <div class="form-field">
          <label for="nome">Nome</label>
          <input id="nome" type="text" formControlName="nome" />
        </div>

        <!-- Prezzo -->
        <div class="form-field">
          <label for="prezzo">Prezzo</label>
          <input id="prezzo" type="number" formControlName="prezzo" />
        </div>

        <!-- Descrizione -->
        <div class="form-field full-width">
          <label for="descrizione">Descrizione</label>
          <textarea
            id="descrizione"
            rows="3"
            formControlName="descrizione"
          ></textarea>
        </div>

        <!-- Genere -->
        <div class="form-field">
          <label for="genere">Genere</label>
          <select id="genere" formControlName="genere">
            <option *ngFor="let g of generi" [value]="g.nome">
              {{ g.nome }}
            </option>
          </select>
        </div>

        <!-- Marca -->
        <div class="form-field">
          <label for="marca">Marca</label>
          <select id="marca" formControlName="marca">
            <option *ngFor="let m of marche" [value]="m.nome">
              {{ m.nome }}
            </option>
          </select>
        </div>

        <!-- Categoria -->
        <div class="form-field">
          <label for="categoria">Categoria</label>
          <select id="categoria" formControlName="categoria">
            <option *ngFor="let c of categorie" [value]="c.nome">
              {{ c.nome }}
            </option>
          </select>
        </div>

        <!-- Taglia Scarpa -->
        <div class="form-field" *ngIf="articolo?.tagliaScarpe !== null">
          <label for="tagliaScarpe">Taglia Scarpa</label>
          <input
            id="tagliaScarpe"
            type="number"
            formControlName="tagliaScarpe"
          />
        </div>

        <!-- Taglia Indumento -->
        <div class="form-field" *ngIf="articolo?.tagliaIndumento !== null">
          <label for="tagliaIndumento">Taglia Indumento</label>
          <select id="tagliaIndumento" formControlName="tagliaIndumento">
            <option *ngFor="let t of taglieIndumento" [value]="t.nome">
              {{ t.nome }}
            </option>
          </select>
        </div>

        <!-- URL Immagine -->
        <div class="form-field full-width">
          <label for="urlImmagine">URL Immagine</label>
          <input id="urlImmagine" type="text" formControlName="urlImmagine" />
        </div>
      </div>

      <p class="msg">{{ msg }}</p>

      <!-- Bottoni principali -->
      <div class="button-group">
        <button type="button" class="btn grey" (click)="onAnnul()">
          Indietro
        </button>
        <button type="submit" class="btn blue">Aggiorna</button>
        <button type="button" class="btn red" (click)="onDelete()">
          Elimina
        </button>
      </div>

      <!-- MODAL DELETE -->
      <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
        <div class="modal-box" (click)="$event.stopPropagation()">
          <h2>
            Vuoi eliminare <span>"{{ articolo.nome }}"</span
            >?
          </h2>
          <p>
            Questa azione non pu√≤ essere annullata, sei sicuro di voler
            procedere?
          </p>

          <div class="modal-actions">
            <!-- SOLO chiude il modal -->
            <button type="button" class="btn-cancel" (click)="closeModal()">
              Annulla
            </button>

            <!-- Conferma delete -->
            <button type="button" class="btn-confirm" (click)="confirmDelete()">
              Elimina
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
