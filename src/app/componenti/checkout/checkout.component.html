<h1 class="titolo">conferma ordine</h1>

<div class="checkout-container" *ngIf="carrello.length > 0; else carrelloVuoto">
  <div class="checkout-form">
    <form #ordineForm="ngForm" (ngSubmit)="confermaOrdine()" novalidate>
      <div>
        <label>Nome</label>
        <input
          type="text"
          [(ngModel)]="ordine.nome"
          name="nome"
          required
          #nome="ngModel"
        />
        <div *ngIf="nome.invalid && nome.touched" class="errore">
          Il nome Ã¨ obbligatorio
        </div>
      </div>

      <div>
        <label>Cognome</label>
        <input
          type="text"
          [(ngModel)]="ordine.cognome"
          name="cognome"
          required
          #cognome="ngModel"
        />
        <div *ngIf="cognome.invalid && cognome.touched" class="errore">
          Il cognome Ã¨ obbligatorio
        </div>
      </div>

      <div>
        <label>Email</label>
        <input
          type="email"
          [(ngModel)]="ordine.email"
          name="email"
          required
          email
          #email="ngModel"
        />
        <div *ngIf="email.invalid && email.touched" class="errore">
          Inserisci una email valida
        </div>
      </div>

      <div>
        <label>Indirizzo</label>
        <input
          type="text"
          [(ngModel)]="ordine.indirizzo"
          name="indirizzo"
          required
          #indirizzo="ngModel"
        />
        <div *ngIf="indirizzo.invalid && indirizzo.touched" class="errore">
          <i class="fa-solid fa-circle-exclamation"></i>
          Per completare lâ€™ordine inserisci lâ€™indirizzo di spedizione
        </div>
      </div>

      <button type="submit" [disabled]="ordineForm.invalid">
        Conferma Ordine
      </button>
    </form>
  </div>

  <div class="checkout-carrello">
    <h3>Carrello</h3>
    <div class="checkout-articoli-scroll">
      <div *ngFor="let item of carrello" class="checkout-item-card">
        <img [src]="item.articolo.urlImmagine" alt="{{ item.articolo.nome }}" />
        <div class="checkout-item-info">
          <p>
            <strong>{{ item.articolo.nome }}</strong>
          </p>
          <p>Taglia: {{ item.taglia || "Tutte le taglie" }}</p>
          <p>QuantitÃ : {{ item.quantita }}</p>
          <p>Genere: {{ item.articolo.genere.nome }}</p>
          <p>Categoria: {{ item.articolo.categoria.nome }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="totale-checkout" *ngIf="carrello.length > 0">
  <strong>Totale: </strong>
  {{ totaleCarrello | currency : "EUR" : "symbol" : "1.2-2" }}
</div>

<ng-template #carrelloVuoto>
  <div class="checkout-empty">
    <h2>Il tuo carrello Ã¨ vuoto ðŸ›’</h2>
    <button routerLink="/home" class="btn">Torna agli articoli</button>
  </div>
</ng-template>
